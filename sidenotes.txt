# README

This README would normally document whatever steps are necessary to get the
application up and running.

Things you may want to cover:

* Ruby version

* System dependencies

* Configuration

* Database creation

* Database initialization

* How to run the test suite

* Services (job queues, cache servers, search engines, etc.)

* Deployment instructions

* ...

posts
      t.references  :author, null: false, foreign_key: { to_table: :users }

comment
      t.references :author, foreign_key: { to_table: :users }
      t.references :post, foreign_key: { to_table: :posts }

Likes
 t.references :post, foreign_key: { to_table: :posts }
      t.references :author, foreign_key: { to_table: :users}



rails g scaffold User name:string photo:string bio:text posts_counter:integer 

rails generate model User name:string photo:string bio:text posts_counter:integer 

rails generate model Comment text:text author_id:references post_id:references
rails generate model Comment text:text author_id:string post_id:string

rails generate model Post title:string text:text comments_counter:integer likes_counter:integer author_id:references

rails generate model Like author_id:references post_id:references

   Prefix Verb                    URI Pattern                        Controller#Action
    users GET                     /users(.:format)                    users#index
          POST                    /users(.:format)                    users#create
 new_user GET                     /users/new(.:format)                users#new
edit_user GET                     /users/:id/edit(.:format)           users#edit
     user GET                     /users/:id(.:format)                users#show
          PATCH                   /users/:id(.:format)                users#update
          PUT                     /users/:id(.:format)                users#update
          DELETE                  /users/:id(.:format)    


gem install kaminari


# posts.all.length


  # expect(first_post.comments).to eq([first_post, second_post, third_post]) 
  # expect(page).to have_content(@first_comment)
  # (comments_counter: post.comments.all.length)
  # @first_like = Like.create(post: first_post, author: first_user, text: 'Hi Tom Hinns!' )
  # user_post_likes_path(@post.author, @post)


first_user = User.create(name: 'Tom Hinns', photo: 'https://c.files.bbci.co.uk/C870/production/_112921315_gettyimages-876284806.jpg', bio: 'I am a teacher from Mexico. I love and value my job, it is basically a reflex than an art.')

second_user = User.create(name: 'Lilly Fillia', photo: 'https://burst.shopifycdn.com/photos/woman-dressed-in-white-leans-against-a-wall.jpg', bio: 'I am a slutty model from Bahamas. Adding values to brands with my personality and cult-like following. Brand marketing has changed dynamically since i arrived the art. It was made for me.')

third_user = User.create(name: 'Merkel Damian', photo: 'https://images.squarespace-cdn.com/content/v1/58d1b3ff1b631bb1893d108d/813f4928-6cc6-4bc8-a4e4-265f94b4d665/matthew-hamilton-tNCH0sKSZbA-unsplash.jpg', bio: 'I am a tech professional from New york. Birthing and amplifying ideas are what my years of tech business has refined me to love. Want to connect? Hit me up guys!. Let us connect.')

fourth_user = User.create(name: 'Jemimah Bolaji', photo: 'https://burst.shopifycdn.com/photos/modern-woman-posing-in-city.jpg', bio: 'I am a hollywood actress from San Francisco. I love and value my job, it is basically a reflex than an art. Want to connect? Hit me up guys!. Lets connect.')



first_post = Post.create(author: first_user, title: 'Watsup Onoja...', text: 'This is my first day at school')
second_post = Post.create(author: first_user, title: 'Hello Ameh...', text: 'This is my second day at Zanzibar')
third_post = Post.create(author: first_user, title: 'Hey Umunna...', text: 'This is my third post on Nairaland Blog')
fourth_post = Post.create(author: first_user, title: 'Hi Ogbonna...', text: 'This is my fourth appearance at Forbes under 30')

fifth_post = Post.create(author: second_user, title: 'Good tidings Ugboaja...', text: 'This is my fifth post on Facebook after a decade. Getting consistent at dishing content.')

sixth_post = Post.create(author: third_user, title: 'Great works Ebenezer...', text: 'This is my sixth dish in 2 hous...Unto Hilda Baci energy')

seventh_post = Post.create(author: fourth_user, title: 'Compliments John...', text: 'This is the seventh show i am viewing after watching Keeping up with the Kardashians.')

Comment.create(post: first_post, author: first_user, text: 'Hi Samantha Hinns!' )
Comment.create(post: first_post, author: first_user, text: 'Hi Chris Tollgate!' )
Comment.create(post: fifth_post, author: first_user, text: 'Hi Lionel Messi!' )
Comment.create(post: sixth_post, author: first_user, text: 'Hi Christiano Ronaldo!' )
Comment.create(post: second_post, author: first_user, text: 'Hi Eberechi Nwangwu!' )

Comment.create(post: first_post, author: second_user, text: 'Hi Robert Offiong!' )
Comment.create(post: second_post, author: second_user, text: 'Hi Leyden Pulse!' )
Comment.create(post: sixth_post, author: second_user, text: 'Hi Mtn Nigeria!' )
Comment.create(post: third_post, author: second_user, text: 'Hi Globacom Telecommunication!' )
Comment.create(post: third_post, author: second_user, text: 'Hi Data is Life!' )

Comment.create(post: first_post, author: third_user, text: 'Hi Erotic Damian!' )
Comment.create(post: first_post, author: fourth_user, text: 'Hi Sultry Bolaji!' )



<% post.latest_five_comments.includes(:author).each do |comment| %>

<% @post.latest_five_comments.includes(:author).each do |comment| %>

.includes(:comments)
































require 'rails_helper'

RSpec.describe 'Showing a user details', type: :feature do
  before(:each) do
    @first_user = User.create(name: 'Tom Hinns',
                              photo: 'https://c.files.bbci.co.uk/C870/production/_112921315_gettyimages-876284806.jpg', bio: 'I am a teacher from Mexico. I love and value my job, its basically a reflex than an art.')
    @second_user = User.create(name: 'Lilly Fillia',
                               photo: 'https://burst.shopifycdn.com/photos/woman-dressed-in-white-leans-against-a-wall.jpg', bio: 'I am a slutty model from Bahamas. Adding values to brands with my personality and cult-like following. Brand marketing has changed dynamically since i arrived the art. It was made for me.')
    @third_user = User.create(name: 'Merkel Damian',
                              photo: 'https://images.squarespace-cdn.com/content/v1/58d1b3ff1b631bb1893d108d/813f4928-6cc6-4bc8-a4e4-265f94b4d665/matthew-hamilton-tNCH0sKSZbA-unsplash.jpg', bio: 'I am a tech professional from New york. Birthing and amplifying ideas are what my years of tech business has refined me to love. Want to connect? Hit me up guys!. Lets connect.')
    @fourth_user = User.create(name: 'Jemimah Bolaji',
                               photo: 'https://burst.shopifycdn.com/photos/modern-woman-posing-in-city.jpg', bio: 'I am a hollywood actress from San Francisco. I love and value my job, its basically a reflex than an art. Want to connect? Hit me up guys!. Lets connect.')

    @first_post = Post.create(author: @first_user, title: 'Hi Kadarshians', text: 'This is my first post')
    @second_post = Post.create(author: @first_user, title: 'Hi Ashimolowos...', text: 'This is my second post')
    @third_post = Post.create(author: @first_user, title: 'Hi Benjamins...', text: 'This is my third post')
    @fourth_post = Post.create(author: @first_user, title: 'Hi Ugboajas...', text: 'This is my fourth post')
    @fifth_post = Post.create(author: @second_user, title: 'Hello Bourgoiers...', text: 'This is my fifth post')
  end

  scenario 'I can see the user profile picture.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(@first_user.photo).to match(%r{^https?://.*\.(jpe?g|gif|png)$})
  end

  scenario 'I can see the user username.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
  end

  scenario 'I can see the number of posts the user has written.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(@first_user.posts_counter).to eq(4)
  end

  scenario 'I can see the user bio.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.bio)
  end

  scenario ' I can see the user first 3 posts.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(@first_user.first_three_posts).to eq([@first_post, @second_post, @third_post])
  end

  scenario 'I can see a button that lets me view all of a user posts.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content('See all posts')
  end

  scenario 'When I click a user post, it redirects me to that post show page.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user.id, @first_post.id)
  end

  scenario 'When I click to see all posts, it redirects me to the user post index page.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_posts_path(@first_user)
    expect(page).to have_content(@first_user.name)
  end
end











































require 'rails_helper'

RSpec.describe 'Showing a post details', type: :feature do
  before(:each) do
    @first_user = User.create(name: 'Tom Hinns',
                              photo: 'https://c.files.bbci.co.uk/C870/production/_112921315_gettyimages-876284806.jpg', bio: 'I am a teacher from Mexico. I love and value my job, its basically a reflex than an art.')
    @second_user = User.create(name: 'Lilly Fillia',
                               photo: 'https://burst.shopifycdn.com/photos/woman-dressed-in-white-leans-against-a-wall.jpg', bio: 'I am a slutty model from Bahamas. Adding values to brands with my personality and cult-like following. Brand marketing has changed dynamically since i arrived the art. It was made for me.')
    @third_user = User.create(name: 'Merkel Damian',
                              photo: 'https://images.squarespace-cdn.com/content/v1/58d1b3ff1b631bb1893d108d/813f4928-6cc6-4bc8-a4e4-265f94b4d665/matthew-hamilton-tNCH0sKSZbA-unsplash.jpg', bio: 'I am a tech professional from New york. Birthing and amplifying ideas are what my years of tech business has refined me to love. Want to connect? Hit me up guys!. Lets connect.')
    @fourth_user = User.create(name: 'Jemimah Bolaji',
                               photo: 'https://burst.shopifycdn.com/photos/modern-woman-posing-in-city.jpg', bio: 'I am a hollywood actress from San Francisco. I love and value my job, its basically a reflex than an art. Want to connect? Hit me up guys!. Lets connect.')

    @first_post = Post.create(author: @first_user, title: 'Hi Kadarshians', text: 'This is my first post')
    @second_post = Post.create(author: @first_user, title: 'Hi Ashimolowos...', text: 'This is my second post')
    @third_post = Post.create(author: @first_user, title: 'Hi Benjamins...', text: 'This is my third post')
    @fourth_post = Post.create(author: @first_user, title: 'Hi Ugboajas...', text: 'This is my fourth post')
    @fifth_post = Post.create(author: @second_user, title: 'Hello Bourgoiers...', text: 'This is my fifth post')

    @first_comment = Comment.create(post: @first_post, author: @first_user, text: 'Hi Tom Hinns!')
    @second_comment = Comment.create(post: @first_post, author: @first_user, text: 'Hi Tom Hinns!')
    @third_comment = Comment.create(post: @fifth_post, author: @first_user, text: 'Hi Tom Hinns!')
    @fourth_comment = Comment.create(post: @sixth_post, author: @first_user, text: 'Hi Tom Hinns!')
    @fifth_comment = Comment.create(post: @sixth_post, author: @first_user, text: 'Hi Tom Hinns!')

    @sixth_comment = Comment.create(post: @first_post, author: @second_user, text: 'Hi Lilly Fillia!')
    @seventh_comment = Comment.create(post: @second_post, author: @second_user, text: 'Hi Lilly Fillia!')
    @eight_comment = Comment.create(post: @sixth_post, author: @second_user, text: 'Hi Lilly Fillia!')
    @ninth_comment = Comment.create(post: @tenth_post, author: @second_user, text: 'Hi Lilly Fillia!')
    @tenth_comment = Comment.create(post: @fourteenth_post, author: @second_user, text: 'Hi Lilly Fillia!')
    @eleventh_comment = Comment.create(post: @first_post, author: @third_user, text: 'Hi Merkel Damian!')
    @sixteenth_comment = Comment.create(post: @first_post, author: @fourth_user, text: 'Hi Jemimah Bolaji!')

    @first_like = Like.create(author: @first_user, post: @first_post)
    @second_like = Like.create(author: @first_user, post: @first_post)
  end

  scenario 'I can see the post title.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(page).to have_content(@first_post.title)
  end

  scenario ' I can see who wrote the post.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(page).to have_content(@first_post.author.name)
  end

  scenario 'I can see how many comments it has.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(@first_post.comments_counter).to eq(5)
  end

  scenario 'I can see how many likes it has.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(@first_post.likes_counter).to eq(2)
  end

  scenario 'I can see the post body.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(page).to have_content(@first_post.text)
  end

  scenario 'I can see the username of each commentor.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(page).to have_content(@first_comment.author.name)
    expect(page).to have_content(@second_comment.author.name)
    expect(page).to have_content(@third_comment.author.name)
    expect(page).to have_content(@fourth_comment.author.name)
    expect(page).to have_content(@fifth_comment.author.name)
  end

  scenario 'I can see the comment each commentor left.' do
    visit users_path
    expect(page).to have_content(@first_user.name)
    click_on @first_user.name
    visit user_path(@first_user.id)
    expect(page).to have_content(@first_user.name)
    visit user_post_path(@first_user, @first_post)
    expect(page).to have_content(@first_user.posts.first.comments.first.text)
    expect(page).to have_content(@first_user.posts.first.comments.second.text)
    expect(page).to have_content(@first_user.posts.first.comments.third.text)
    expect(page).to have_content(@first_user.posts.first.comments.fourth.text)
    expect(page).to have_content(@first_user.posts.first.comments.fifth.text)
  end
end
